#:kivy 2.1.0
WindowManager:
    HomeScreen:
    LevelScreen:
	CustomLevelScreen:

<HomeButton@Button>:
    font_size: 0.35 * self.height
    size_hint: .20,.20
    color: (1, 1, 1, 1)
    background_color: (0,0,0,0)
    markup: True
    Image:
	    source: 'Images/btn_home.png'
		center_x: self.parent.center_x
		center_y: self.parent.center_y
		size: root.width, root.height
<LevelLock@Image>:
	size_hint: .1, .1

<HomeScreen>:
    name: "home"
    FloatLayout:
        Image:
            source:'Images/home_background.jpg'
            pos_hint:{'x': 0,'y':0}
            size_hint: 1 , 1
            keep_ratio: False
            allow_stretch: True
        Label:
            text: "[i][b]Incredibot[/b][/i]"
            markup: True
            pos_hint: {'center_x': .5,'center_y':.88}
            size_hint: .20,.20
            font_size: 0.5 * self.height
            outline_color: (0,0,0)
            outline_width: 10
        HomeButton:
            text:'[b]Levels[/b]'
            pos_hint: {'center_x': .5,'center_y':.65}
            on_release:              
                root.manager.transition.direction = 'left'
                root.manager.current = 'levels'  
        HomeButton:
            text:'[b]Cours[/b]'
            pos_hint: {'center_x': .5,'center_y':.40}
            on_release: root.cours()
        HomeButton:
            text:'[b]Quit[/b]'
            pos_hint: {'center_x': .5,'center_y':.15}
            on_release: app.close_application()

<LevelScreen>:
    name: "levels"
	on_pre_enter: root.update()
    FloatLayout:
        Image:
            source:'Images/level_background.jpg'
            pos_hint:{'x': 0,'y':0}
            size_hint: 1 , 1
            keep_ratio: False
            allow_stretch: True
        HomeButton:
            text: "Home"
            size_hint: .12,.12
            pos_hint: {'center_x': .14,'center_y':.86}            
            on_press:
                root.manager.transition.direction = 'right'
                root.manager.current = 'home'
        Label:
            id: _labelEtage
            text: "1"
            pos_hint: {'center_x': .76,'center_y':.86}
            size_hint: .04,.04
            font_size: self.height
            bold: True
        Button:
            id: _boutonAugmente
            font_size: 0.35 * self.height
            text: " + "
            size_hint: .06,.06
            pos_hint: {'center_x': .82,'center_y':.86}
            disabled: False
            on_release: root.augmente()
        Button:
            id: _boutonBaisse
            text: " - "
            font_size: 0.35 * self.height
            size_hint: .06,.06
            pos_hint: {'center_x': .70,'center_y':.86} 
            disabled: True
            on_press: root.baisse()   
        HomeButton:
            id: _bouton1
            text: "Niveau 1"
            font_size: 0.28 * self.height
            pos_hint: {'center_x': .14,'center_y':.6}
            on_press:
				root.setLvl(str(1 + 8 * root.etage))
                root.manager.transition.direction = 'left'
                root.manager.current = "custom" if int(root.getLvlMax()) >= (1 + 8 * root.etage) else "levels"
		LevelLock:
			id: _Indicateur1
			source: root.getImage((1 + 8 * root.etage))
			pos_hint: {"x": .16 , "y" : .48}
        HomeButton:
            id: _bouton2
            text: "Niveau 2"
            font_size: 0.28 * self.height
            pos_hint: {'center_x': .38,'center_y':.6}
            on_press:
				root.setLvl(str(2 + 8 * root.etage))
                root.manager.transition.direction = 'left'
                root.manager.current = "custom" if int(root.getLvlMax()) >= (2 + 8 * root.etage) else "levels"
		LevelLock:
			id: _Indicateur2
			source: root.getImage((2 + 8 * root.etage))
			pos_hint: {"x": .4 , "y" : .48}
        HomeButton:
            id: _bouton3
            text: "Niveau 3"
            font_size: 0.28 * self.height
            pos_hint: {'center_x': .62,'center_y':.6}
            on_press:
				root.setLvl(str(3 + 8 * root.etage))
                root.manager.transition.direction = 'left'
                root.manager.current = "custom" if int(root.getLvlMax()) >= (3 + 8 * root.etage) else "levels"
		LevelLock:
			id: _Indicateur3
			source: root.getImage((3 + 8 * root.etage))
			pos_hint: {"x": .64 , "y" : .48}
        HomeButton:
            id: _bouton4
            text: "Niveau 4"
            font_size: 0.28 * self.height
            pos_hint: {'center_x': .86,'center_y':.6}
            on_press:
				root.setLvl(str(4 + 8 * root.etage))
                root.manager.transition.direction = 'left'
                root.manager.current = "custom" if int(root.getLvlMax()) >= (4 + 8 * root.etage) else "levels"
		LevelLock:
			id: _Indicateur4
			source: root.getImage((4 + 8 * root.etage))
			pos_hint: {"x": .88 , "y" : .48}
        HomeButton:
            id: _bouton5
            text: "Niveau 5"
            font_size: 0.28 * self.height
            pos_hint: {'center_x': .14,'center_y':.25}
            on_press:
				root.setLvl(str(5 + 8 * root.etage))
                root.manager.transition.direction = 'left'
                root.manager.current = "custom" if int(root.getLvlMax()) >= (5 + 8 * root.etage) else "levels"
		LevelLock:
			id: _Indicateur5
			source: root.getImage((5 + 8 * root.etage))
			pos_hint: {"x": .16 , "y" : .13}
        HomeButton:
            id: _bouton6
            text: "Niveau 6"
            font_size: 0.28 * self.height
            pos_hint: {'center_x': .38,'center_y':.25}
            on_press:
				root.setLvl(str(6 + 8 * root.etage))
                root.manager.transition.direction = 'left'
                root.manager.current = "custom" if int(root.getLvlMax()) >= (6 + 8 * root.etage) else "levels"
		LevelLock:
			id: _Indicateur6
			source: root.getImage((6 + 8 * root.etage))
			pos_hint: {"x": .4 , "y" : .13}
        HomeButton:
            id: _bouton7
            text: "Niveau 7"
            font_size: 0.28 * self.height
            pos_hint: {'center_x': .62,'center_y':.25}
            on_press:
				root.setLvl(str(7 + 8 * root.etage))
                root.manager.transition.direction = 'left'
                root.manager.current = "custom" if int(root.getLvlMax()) >= (7 + 8 * root.etage) else "levels"
		LevelLock:
			id: _Indicateur7
			source: root.getImage((7 + 8 * root.etage))
			pos_hint: {"x": .64 , "y" : .13}
        HomeButton:
            id: _bouton8
            text: "Niveau 8"
            font_size: 0.28 * self.height
            pos_hint: {'center_x': .86,'center_y':.25}
            on_press:
				root.setLvl(str(8 + 8 * root.etage))
                root.manager.transition.direction = 'left'
                root.manager.current = "custom" if int(root.getLvlMax()) >= (8 + 8 * root.etage) else "levels"
		LevelLock:
			id: _Indicateur8
			source: root.getImage((8 + 8 * root.etage))
			pos_hint: {"x": .88 , "y" : .13}
		
<CustomLevelScreen>:
	name: "custom"
	on_pre_enter : root.chargement()
	FloatLayout:
        id: _layoutLvl
        Image:
            id: _imageLvl
            source:'Images/lvl/lvl1.png'
            pos_hint:{'x': 0.4374,'y':0.05}
            size_hint: 0.50625 , 0.9
            keep_ratio: False
            allow_stretch: True
		Button:
			text: "Retour"
			font_size: 0.4 * self.height
			size_hint: .1, .075  
			pos_hint: {'center_x': .1,'center_y':.9}
            on_press:
                root.clean()
                root.manager.transition.direction = 'right'
                root.manager.current = 'levels'
		Label:
			id: _labelNomLvl
            bold: True
			font_size: 0.4 * self.height
			size_hint: .2, .075
			pos_hint: {'center_x': .25,'center_y':.9}
        TextInput:
            id: _userInput
            font_size: .06 * self.height
            size_hint: 0.3 , 0.4
            pos_hint: {"center_x": 0.2, "center_y" : 0.625}
		Button:
			text: "Avancer"
			font_size: 0.4 * self.height
			size_hint: 0.3/4,  0.3/4  
			pos_hint: {'x': .05,'y': .425 - 0.3/4}
            on_press:
                _userInput.text += "\nAvancer" if _userInput.text != "" else "Avancer"
		Button:
			text: "Reculer"
			font_size: 0.4 * self.height
			size_hint: 0.3/4, 0.3/4  
			pos_hint: {'x': .05 + 0.3/4,'y': .425 - 0.3/4}
            on_press:
                _userInput.text += "\nReculer" if _userInput.text != "" else "Reculer"
		Button:
			text: "Droite"
			font_size: 0.4 * self.height
			size_hint: 0.3/4, 0.3/4  
			pos_hint: {'x': .05 + 0.6/4,'y': .425 - 0.3/4}
            on_press:
                _userInput.text += "\nDroite" if _userInput.text != "" else "Droite"
		Button:
			text: "Gauche"
			font_size: 0.4 * self.height
			size_hint: 0.3/4, 0.3/4  
			pos_hint: {'x': .05 + 0.9/4,'y': .425 - 0.3/4}
            on_press:
                _userInput.text += "\nGauche" if _userInput.text != "" else "Gauche"
        Label:
            id: _labelInstruction
			font_size: 0.35 * self.height
            bold: True
			size_hint: 0.9/4, 0.3/4  
			pos_hint: {'x': .05,'y': .425 - 0.6/4}
            
		Button:
			text: "Reset"
			font_size: 0.4 * self.height
			size_hint: 0.3/4, 0.3/4  
			pos_hint: {'x': .05 + 0.9/4,'y': .425 - 0.6/4}
            on_press:
                _userInput.text = ""
        Button:
            text: "Play"
            size_hint: 0.3 , 0.075
            font_size: 0.4 * self.height
            pos_hint: {"center_x" : 0.2, "center_y" : 0.2}
            on_press:
                root.play(_userInput.text)
        Label:
            id: _labelResultat
            font_size: 0.3 * self.height
            bold: True
            size_hint: 0.3, 0.1
            pos_hint: {"center_x": 0.2, "center_y": .1}
